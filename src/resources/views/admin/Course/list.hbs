<h1 class="text-center">LIST COURSES</h1>
<div class="d-flex justify-content-between">
   <a href="/admin/course/create" class="btn btn-outline-primary ">Thêm mới khóa học</a>
   <a href="/admin/course/bin" class="btn btn-warning ">Khóa học đã xóa ({{deleteCount}})</a>
</div>
<table class="table mt-4">
   <thead>
      <tr>
         <th scope="col">#</th>
         <th scope="col">Img</th>
         <th scope="col">Name</th>
         <th scope="col">Level</th>
         <th></th>
      </tr>
   </thead>
   <tbody>
      {{#each courses}}

      <tr>
         <th scope="row">{{sum @index 1}}</th>
         <td><img src="{{this.image}}" alt="" width="100" height="100"></td>
         <td>{{this.name}}</td>
         <td>{{this.level}}</td>
         <td>
            <button class='btn btn-danger delete' data-id='{{this._id}}'>Delete</button>
            <a href='/admin/course/{{this._id}}/edit' class='btn btn-warning'>Edit</a>
         </td>
      </tr>
      {{else}}
      <tr>
         <td colspan="5" class="text-center">No Record</td>
      </tr>
      {{/each}}

   </tbody>
</table>

{{!-- confirm --}}
<form action="" id="deleteForm" method="POST"></form>
<script>
   const btnDels = document.querySelectorAll(".delete");
   const deleteForm = document.querySelector("#deleteForm");

   btnDels.forEach(del => {
      const id = del.dataset.id;

      del.addEventListener("click", () => {
         const confirm = window.confirm("Are you sure you want to delete this course?");
         if (confirm) {
            deleteForm.action = '/admin/course/' + id + '?_method=DELETE';
            deleteForm.submit();

         }
      })
   })
</script>